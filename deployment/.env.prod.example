# ============================================
# BULQ PRODUCTION ENVIRONMENT CONFIGURATION
# ============================================
# IMPORTANT: Copy this file and configure secrets
#   cp deployment/.env.prod.example deployment/.env.prod
#   vim deployment/.env.prod  # Set secrets
# ============================================

# ============================================
# SECURITY - REQUIRED
# ============================================
# Generate with: openssl rand -hex 32
SECRET_KEY=REPLACE_WITH_GENERATED_SECRET_KEY

# Required for HTTPS cookies
SECURE_COOKIES=true

# ============================================
# DATABASE - REQUIRED
# ============================================
POSTGRES_DB=bulq
POSTGRES_USER=bulq
# Change to a strong password (16+ characters)
POSTGRES_PASSWORD=REPLACE_WITH_STRONG_PASSWORD

DATABASE_URL=postgresql://bulq:${POSTGRES_PASSWORD}@db:5432/bulq

# Database Pool
DB_POOL_SIZE=20
DB_MAX_OVERFLOW=10
DB_POOL_TIMEOUT=30
DB_POOL_RECYCLE=3600

# ============================================
# APPLICATION
# ============================================
# Must be 'database' in production
REPO_MODE=database

# Session
SESSION_EXPIRY_HOURS=24

# ============================================
# CORS - REQUIRED
# ============================================
# Set to production domain (with https://)
ALLOWED_ORIGINS=https://bulq.vagolan.com

# ============================================
# DOCKER/CADDY
# ============================================
# Production domain
CADDY_DOMAIN=bulq.vagolan.com

# Port to expose (1314 default, or use reverse proxy on 80/443)
CADDY_PORT=1314

# Internal Caddy port
CADDY_INTERNAL_PORT=80

# ============================================
# BUILD
# ============================================
# Disable dev dependencies in production
BUILD_DEV_DEPS=false

# Base path for frontend
VITE_BASE_PATH=/

# ============================================
# LOGGING
# ============================================
LOG_LEVEL=INFO
LOG_FORMAT=json
LOG_FILE=/app/logs/app.log

# ============================================
# DEPLOYMENT CHECKLIST
# ============================================
# Before deploying:
# [ ] Generated strong SECRET_KEY
# [ ] Set strong POSTGRES_PASSWORD
# [ ] Updated ALLOWED_ORIGINS to production domain
# [ ] Verified CADDY_DOMAIN matches your domain
# [ ] Configured firewall (port 1314 or 80/443)
# [ ] DNS A record pointing to server
# [ ] Set chmod 600 deployment/.env.prod
# ============================================
